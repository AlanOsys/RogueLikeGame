<!DOCTYPE html>
<head>
<title>Dungeon Crawler</title>

<style type="text/css">
body {
    background-color: rgb(87, 87, 87);
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Poppins", sans-serif;
    outline: none;
    -webkit-user-select: none; /* Safari */
  -ms-user-select: none; /* IE 10 and IE 11 */
  user-select: none; /* Standard syntax */
}
#container{
    font-size: 65px;
    position: absolute;
    top: 50px;
    overflow-x: hidden;
    overflow-y: hidden;
    max-width: 460px;
    max-height: 70px;
    
}
#CombatScreen{
    position: absolute;
    left: 0px;
    top: 0px;
    background-color: #16161d;
    width: 400px;
    height: 300px;

}
#Search{
    right: 0px;
    top: 0px;
    position: absolute;
    width: 200px;
    height: 300px;
    background-color: #16161d;
}
#AllyDice{
    position: absolute;
    left: 10px;
    top: 50px;
}
#EnemyDice{
position: absolute;
    right: 10px;
    top: 50px;
}
.RollDisplay{
    position: relative;
    width: 50px;
    height: 50px;
    background-color: aliceblue;
    margin-top: 10px;
    display:grid;
    font-size: 50px;
    text-align: center;
}
#EnemyName{
    color: white;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: 50px;
}
#EnemyDescription{
    color: white;
    position: absolute;
   
    top: 150px;
    text-align: center;
}
#AllyPicks{
    position: absolute;
    left: 130px;
    width: 60px;
    height: 180px;
    top: 50px;

}
#AllyPicks div{
    position: relative;
    width: 50px;
    height: 50px;
    background-color: rgb(74, 74, 74);
    margin-top: 10px;
    display:grid;
    font-size: 50px;
    text-align: center;
    box-shadow: none;
}

#EnemyPicks{
    position: absolute;
    right: 130px;
    width: 60px;
    height: 180px;
    top: 50px;

}
#EnemyPicks div{
    position: relative;
    width: 50px;
    height: 50px;
    background-color: rgb(74, 74, 74);
    margin-top: 10px;
    display:grid;
    font-size: 50px;
    text-align: center;
    box-shadow: none;
}
#Fight{
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: 0px;
    color: aliceblue;
    background-color:#16161d;
    width: auto;
    font-size: 40px;
}
#Inventory{
    position: absolute;
    left: 0px;
    top: 300px;
    background-color: #202024;
    width: 400px;
    height: 100px;
    color: aliceblue;
    font-size: 20px;
    overflow-y: scroll;
    
}
.Item{
    display: grid;
    position: relative;
    margin-top: 30px;
    margin-left: 10px;
    width: 40px;
    height: 40px;
    background-color: grey;
    float: left;
}
.Emblem{
   margin-top: 0px;
   margin-left: 0px;
   font-size: 25px;
   color: white;
    -webkit-text-stroke: 1px black;
}
.Amount{
    margin-top: 0px;
    margin-left: 0px;
    right: 0px;
    top: 20px;
    position: absolute;
    color: white;
    -webkit-text-stroke: 1px black;
}
#Shop{
    position: absolute;
    left: 0px;
    top: 0px;
    background-color: #16161d;
    width: 400px;
    height: 300px;
}
#CommonShop{
    background-color: rgb(0, 193, 39);
  
}
#RareShop{
    background-color: rgb(40, 0, 187);
  
}
#EpicShop{
    background-color: rgb(176, 0, 179);
    
}
.Shops{
    float: left;
    display: block;
    position: relative;
    width: 100px;
    height: 150px;
    margin-left: 25px;
    margin-top: 40px;
}
#CloseButton{
    position: absolute;
    top: 0px;
    right: 0px;
    width: 40px;
    height: 40px;
    font-size: 30px;
    text-align: center;
    color: red;
    -webkit-text-stroke: 0.5px black;
    background-color: #202024;
}
.ShopItemName{
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: 10px;
    font-size: 20px;
    color: rgb(255, 255, 255);
    -webkit-text-stroke: 1px black;
}
.ShopItemCost{
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: 70px;
    font-size: 30px;
    color: rgb(255, 175, 46);
    -webkit-text-stroke: 1px black;

}
#DiceContainer{
    position: absolute;
    left: 0px;
    top: 400px;
    width: 400px;
    height: 200px;
    background-color: #16161d;
}
#PickDiceToSwap{
    position: absolute;
    left: 0px;
    top: 400px;
    width: 400px;
    height: 200px;
    background-color: #16161d;
}
.DiceDisplay{
    width: 45px;
    height: 45px;
    float: left;
    background-color: aliceblue;
    
    
    margin-top: 5px;
    margin-left: 5px;
    font-size: 40px;
    text-align: center;
}
.DiceEntity{
    float: left;

}
#DiceTooltip{
    position: absolute;
    left: 0px;
    top: 0px;
    width: 400px;
    height: 200px;
    background-color: #16161d;
}
.discard{
    position: absolute;
    bottom: 0px;
    left: 50%;
    transform: translateX(-50%);
    background-color: red;
    color: white;
    width: auto;
    height: auto;
    font-size: 30px;
}
.TooltipDiceDisplay{
    left: 0px;
    position: absolute;
    top: 30px;
}
#HowToPlayButton{
    left: 450px;
    width: auto;
    height: auto;
    position: absolute;
    font-size: 20px;
}
#LoreButton{
    left: 580px;
    width: auto;
    height: auto;
    position: absolute;
    font-size: 20px;
}
</style>

</head>

<body>
    
    <div id="container" style="left: 0px;"></div>
    <div id="Search">
        <div id="EnemyName">Enemy</div>
        <div id="EnemyDescription">Description</div>
    </div>
    <div id="Inventory">
        <p style="position: absolute;left: 8px;top: -15px;">Inventory</p>
    </div>
    <div id="DiceContainer"></div>
    <button onclick="HowToPlay()" id="HowToPlayButton">How to Play</button>
    <button onclick="Lore()" id="LoreButton">Lore</button>
    <div style="left: 450px;position: absolute; max-width: 400px; top: 20px; opacity: 0;" id="ToolTip">
        <p>How to Play:</p>
        <p>Move left and right using A and D to explore the dungeon.</p>
        <p>S = Shop where you can use gold gathered to buy items that 
            either give you new dice to use or upgrade your dice in battle.
        </p>
        <p>A = basic enemy, more enemies will come out, a full encyclopedia will be created soon 
            on the right the enemy description will pop up in battle explaining how the enemy behaves.
        </p>
        <p>In combat, rolled dice will be able to be selected and put into slots, once all dice
            are assigned you can fight, at which point the enemy will reveal their dice and the number will be 
            compared based on position. If you win 2/3 you win and get gold for each won comparison.
        </p>

    </div>
    <div style="left: 450px;position: absolute; max-width: 400px; top: 20px; opacity: 0;" id="ToolTipLore">
        <p>Lore:</p>
        <p>Example lore</p>
    </div>
<script>
Depth = 1
CurrentRoute=0
container = document.getElementById("container")
Routes = [[]]
bounds = 8
Shopping = false
InCombat = false
Inventory = document.getElementById("Inventory")
function Lore(){
    document.getElementById("ToolTip").style.opacity = 0
    document.getElementById("ToolTipLore").style.opacity = 1
}
function HowToPlay(){
    document.getElementById("ToolTip").style.opacity = 1
    document.getElementById("ToolTipLore").style.opacity = 0
}
class Item{
    constructor(name,stackable){
        this.name = name
        this.stackable = stackable
    }
    instantiate(){
        var Item = document.createElement("div")
        var Emblem = document.createElement("p")
        var Amount = document.createElement("p")
        Emblem.className = "Emblem"
        Amount.className = "Amount"
        Item.id = this.name
        Item.className = "Item"
        Item.appendChild(Emblem)
        Item.appendChild(Amount)
        if(this.name[0] == '+'){
            Emblem.innerHTML = "+"+this.name[1]
            Item.onclick = function ItemOnclick(){
                if(InCombat){
                    CombatScreen = document.getElementById("CombatScreen")
                    Item.style.backgroundColor = 'green'
                    var BuffContainer = document.createElement("div")
                    BuffContainer.id = "AllyDice"
                    for(let i = 0;i<AllyDice.children.length;i++){
                        var BuffAllyDice = document.createElement("div")
                        BuffAllyDice.innerHTML = AllyDice.children[i].innerHTML
                        BuffAllyDice.className = "RollDisplay"
                        BuffAllyDice.style.backgroundColor = 'green'
                        BuffAllyDice.onclick = function BuffDice(){
                            AllyDice.children[i].innerHTML = parseInt(AllyDice.children[i].innerHTML) + parseInt(Item.children[0].innerHTML.replace("+",""))
                            Item.remove()
                            BuffContainer.remove()
                        }
                        BuffContainer.appendChild(BuffAllyDice)
                        //.children[i].style.backgroundColor = 'green'
                        //AllyDice.children[i].onclick = function 
                    }
                    CombatScreen.appendChild(BuffContainer)


                }
            }
        }else{
            Emblem.innerHTML = this.name[0]
            Item.onclick = function DiceItemOnclick(){
                if(!InCombat&&!Shopping){
                    //display the tooltip now
                    var DiceTooltip = document.createElement("DiceTooltip")
                    DiceTooltip.id = "DiceTooltip"
                    var Discard = document.createElement("button")
                    Discard.className = 'discard'
                    Discard.innerHTML = 'Discard'
                    Discard.onclick = function DiscardTooltop(){
                        Item.remove()
                        DiceTooltip.remove()
                    }
                    var TooltipDiceDisplay = document.createElement("div")
                    TooltipDiceDisplay.className = 'TooltipDiceDisplay'
                    var dicerolls = DiceGachapon(Emblem.innerHTML)
                    for(let i = 0;i<6;i++){
                        var face = document.createElement("div")
                        face.className = "DiceDisplay"
                        face.innerHTML = dicerolls[i]
                        TooltipDiceDisplay.appendChild(face)
                    }
                    DiceTooltip.appendChild(TooltipDiceDisplay)
                    DiceTooltip.appendChild(Discard)
                    document.body.appendChild(DiceTooltip)
                    //light up the 3 DiceDisplay.children
                    var PickDiceToSwap = document.createElement("div")
                    PickDiceToSwap.id = "PickDiceToSwap"
                    for(let j = 0;j<3;j++){

                    
                        var DiceContainerDisplay = document.createElement("div")
                        DiceContainerDisplay.className = "DiceEntity"
                        for(let i = 0;i<6;i++){
                            var face = document.createElement("div")
                            face.className = "DiceDisplay"
                            face.innerHTML = AllDice[j].rolls[i]
                            face.style.backgroundColor = 'green'
                            DiceContainerDisplay.appendChild(face)
                            face.onclick = function diceswap(){
                                AllDice[j].changeRolls(dicerolls)
                                Item.remove()
                                DiceTooltip.remove()
                                PickDiceToSwap.remove()
                                //TODO
                            }
                        }
                        
                        PickDiceToSwap.appendChild(DiceContainerDisplay)
                    }
                    document.body.appendChild(PickDiceToSwap)
                    //give them onclicks that display a lil tooltip that shows what you gacha'd
                    //and changeRolls()
                    //add a discard
                    
                }
            }
        }
        
        if(this.stackable){
            Amount.innerHTML = "0"
        }
        

        Inventory.appendChild(Item)
    }
    add(amount){
        document.getElementById(this.name).children[1].innerHTML = parseInt(document.getElementById(this.name).children[1].innerHTML)+amount
    }
}
class Dice{
    constructor(){
        this.rolls = [1,2,3,4,5,6]
        var DiceEntity = document.createElement("div")
        this.Entity = DiceEntity
        DiceEntity.className = "DiceEntity"
        for(let i = 0;i<6;i++){
            var DiceDisplay = document.createElement("div")
            DiceDisplay.className = "DiceDisplay"
            DiceEntity.appendChild(DiceDisplay)
        }
        document.getElementById("DiceContainer").appendChild(DiceEntity)
    }
    pick(){
        return this.rolls[Math.floor(Math.random()*this.rolls.length-0.00001)]
    }
    changeRolls(newRolls){
        this.rolls = newRolls
        for(let i = 0;i<6;i++){
            this.Entity.children[i].innerHTML = newRolls[i]
        }
    }
}
function updateDice(){
    //update visuals in the DiceContainer div
    DiceContainer = document.getElementById("DiceContainer")
    for(let i = 0;i<DiceContainer.children.length;i++){
        for(j in AllDice[i].rolls){
            DiceContainer.children[i].children[j].innerHTML = AllDice[i].rolls[j]
        }
        

    }
}
function DiceGachapon(rarity){
    rolls = [0,0,0,0,0,0]
    if(rarity == 'B'){
        total = 21
        for(let i = 0;i<6;i++){
            if(total>6){
                roll = Math.floor(Math.random()*6-0.00001)+1
            }else{
                roll = Math.floor(Math.random()*total-0.00001)+1
            }
            
            rolls[i] = roll
            total -= roll
        }
    }else if(rarity == 'R'){
        total = 25
        for(let i = 0;i<6;i++){
            if(total>8){
                roll = Math.floor(Math.random()*8-0.00001)+1
            }else{
                roll = Math.floor(Math.random()*total-0.00001)+1
            }
            
            rolls[i] = roll
            total -= roll
        }
    }else if(rarity == 'E'){
        total = 30
        for(let i = 0;i<6;i++){
            if(total>10){
                roll = Math.floor(Math.random()*10-0.00001)+1
            }else{
                roll = Math.floor(Math.random()*total-0.00001)+1
            }
            
            rolls[i] = roll
            total -= roll
        }
    }
    return rolls
}
function Initialise(){
    for(let i = 0;i<bounds;i++){
        Routes[CurrentRoute].push("-")
    }
    Routes[CurrentRoute].push("#")
    for(let i = 0;i<bounds;i++){
        Routes[CurrentRoute].push("-")
    }
    Gold = new Item("Gold",true)
    Gold.instantiate()
    
    Dice1 = new Dice()
    Dice2 = new Dice()
    Dice3 = new Dice()
    AllDice = [Dice1,Dice2,Dice3]
    updateDice()
    //Gold.add(100)
    
}
function updateContainer(){
    container.innerHTML = ""
    playerIndex = Routes[CurrentRoute].indexOf('#')
    for(i in Routes){
        //console.log(String(Routes[i]).replaceAll(",",""))
        if(playerIndex>=bounds){

        
        container.innerHTML += String(Routes[i].slice(playerIndex-bounds,playerIndex+bounds)).replaceAll(",","").replaceAll("[","").replaceAll("]","").replaceAll("'","") + "\n"
        }else{
            container.innerHTML += String(Routes[i].slice(0,16)).replaceAll(",","").replaceAll("[","").replaceAll("]","").replaceAll("'","") + "\n"
        
        }
    }
    
}

function Move(Orientation){
    if(Orientation == 'Right'){
        playerIndex = Routes[CurrentRoute].indexOf('#')
        console.log(Routes[CurrentRoute][playerIndex+1])
        if(Routes[CurrentRoute][playerIndex+1] == '-'){
            Routes[CurrentRoute][playerIndex] = Routes[CurrentRoute][playerIndex+1]
            Routes[CurrentRoute][playerIndex+1] = '#'
            if(playerIndex==Routes[CurrentRoute].length-bounds){
                Depth+=1
                ProbRoll = Math.abs(Math.floor(Math.random()*5-0.0000001))
                if(ProbRoll != 0 && Depth!=10){
                    Routes[CurrentRoute].push('-')
                }if(ProbRoll == 0 && Depth!=10){
                    Encounters = ['A','S']
                    RandomEncounter = Math.abs(Math.floor(Math.random()*Encounters.length-0.000001))
                    Routes[CurrentRoute].push(Encounters[RandomEncounter])
                }if(Depth == 10){
                    Depth = 1
                    BossArray = ['?']
                    RandomEncounter = Math.abs(Math.floor(Math.random()*BossArray.length-0.000001))
                    Routes[CurrentRoute].push(BossArray[RandomEncounter])
                }
            }
        }if(Routes[CurrentRoute][playerIndex+1] == 'A'){
            Combat('A')
        }if(Routes[CurrentRoute][playerIndex+1] == 'S'){
            Shop()
        }if(Routes[CurrentRoute][playerIndex+1] == '?'){
            Combat('?')
        }
        
        
        
        //Routes[CurrentRoute].splice(0,1)
        updateContainer()
    }if(Orientation == 'Left'){
        playerIndex = Routes[CurrentRoute].indexOf('#')
        if(playerIndex != 0){

        
        Routes[CurrentRoute][playerIndex] = Routes[CurrentRoute][playerIndex-1]
        Routes[CurrentRoute][playerIndex-1] = '#'
        }
        if(playerIndex == "d"){
            ProbRoll = Math.abs(Math.floor(Math.random()*20-0.0000001))
            if(ProbRoll != 0){
                Routes[CurrentRoute].unshift('-')
            }if(ProbRoll == 0){
                Routes[CurrentRoute].unshift('+')
            }
            
        }
        
        //Routes[CurrentRoute]`.pop()
        updateContainer()
    }
    

}
document.onkeypress = function (e) {
    if(!InCombat && !Shopping){
        e = e || window.event;
        if(e.keyCode == 100){
            Move('Right')
        }if(e.keyCode == 97){
            Move('Left')
        }
    }
    
}
function SearchUp(Enemy){
    Search = document.getElementById("Search")

    if(Enemy == 'A'){
        Search.children[0].innerHTML = 'A'
        Search.children[1].innerHTML = "Ambusher is the most basic enemy, it will not change the position of it's dice in any way and has no additional buffs."
    }
}
function Shop(){
    Shopping = true
    ShopScreen = document.createElement("div")
    ShopScreen.id = "Shop"
    document.body.appendChild(ShopScreen)    
    shopTypes = ['CommonShop','RareShop','EpicShop']
    ItemTypes = [
        ['Basic Dice Gachapon'],//,'+1 to Roll'],
        ['Rare Dice Gachapon','+2 to Roll'],
        ['Epic Dice Gachapon','+3 to Roll']
    ]
    for(let i = 0;i<3;i++){
        ExampleShop = document.createElement("div")
        ExampleShop.id = shopTypes[i]
        ExampleShop.className = 'Shops'
        ItemName = document.createElement("p")
        ItemCost = document.createElement("p")
        ItemName.className = "ShopItemName"
        ItemCost.className = "ShopItemCost"
        ItemName.innerHTML = ItemTypes[i][Math.floor(Math.random()*ItemTypes[i].length-0.00001)]
        ItemCost.innerHTML = i+1

        ExampleShop.onclick = function onclickShop(){
            if(parseInt(this.children[1].innerHTML)<= parseInt(document.getElementById("Gold").children[1].innerHTML)){

                Gold.add(-parseInt(this.children[1].innerHTML))
                NewDice = new Item(this.children[0].innerHTML,false)
                NewDice.instantiate()

            }
        }

        ExampleShop.appendChild(ItemName)
        ExampleShop.appendChild(ItemCost)
        ShopScreen.appendChild(ExampleShop)
    }
    CloseButton = document.createElement("button")
    CloseButton.id = "CloseButton"
    CloseButton.innerHTML = "X"
    CloseButton.onclick = function closeShop(){
        Shopping = false
        playerIndex = Routes[CurrentRoute].indexOf('#')
        Routes[CurrentRoute][playerIndex+1] = '-'
        updateContainer()
        this.parentNode.remove()
    }
    ShopScreen.appendChild(CloseButton)

}
function Combat(Enemy){
    InCombat = true
    console.log(AllDice[0].rolls+"\n"+AllDice[1].rolls+"\n"+AllDice[2].rolls+"\n")
    CombatScreen = document.createElement("div")
    CombatScreen.id = "CombatScreen"
    document.body.appendChild(CombatScreen)

    AllyPicks = document.createElement("div")
    EnemyPicks = document.createElement("div")
    AllyPicks.id = 'AllyPicks'
    FirstPick = document.createElement("div")
    AllyPicks.appendChild(FirstPick)
    SecondPick = document.createElement("div")
    AllyPicks.appendChild(SecondPick)
    ThirdPick = document.createElement("div")
    AllyPicks.appendChild(ThirdPick)


    EnemyPicks.id = 'EnemyPicks'
    FirstPick = document.createElement("div")
    EnemyPicks.appendChild(FirstPick)
    SecondPick = document.createElement("div")
    EnemyPicks.appendChild(SecondPick)
    ThirdPick = document.createElement("div")
    EnemyPicks.appendChild(ThirdPick)

    CombatScreen.appendChild(AllyPicks)
    CombatScreen.appendChild(EnemyPicks)
    Fight = document.createElement("button")
    Fight.id = 'Fight'
    Fight.innerHTML = 'Check'
    Fight.onclick = function oncl(){ProceedToCombat(Enemy)}

    CombatScreen.appendChild(Fight)

    Roll1 = 0
    Roll2 = 0
    Roll3 = 0
    if(Enemy == 'A'){
        //Basic enemy to trial combat on 
        Roll1 = Math.floor(Math.random()*6-0.00001)+1
        Roll2 = Math.floor(Math.random()*6-0.00001)+1
        Roll3 = Math.floor(Math.random()*6-0.00001)+1
        SearchUp('A')
    }if(Enemy == '?'){
        //Basic Boss to trial boss combat on 
        Roll1 = Math.floor(Math.random()*8-0.00001)+1
        Roll2 = Math.floor(Math.random()*8-0.00001)+1
        Roll3 = Math.floor(Math.random()*8-0.00001)+1
    }
    Roll1Display = document.createElement("div")
    Roll2Display = document.createElement("div")
    Roll3Display = document.createElement("div")
    Roll1Display.innerHTML = Roll1
    Roll2Display.innerHTML = Roll2
    Roll3Display.innerHTML = Roll3
    Roll1Display.className = "RollDisplay"
    Roll2Display.className = "RollDisplay"
    Roll3Display.className = "RollDisplay"
    EnemyDice = document.createElement("div")
    EnemyDice.id = "EnemyDice"
    
    CombatScreen.appendChild(EnemyDice)
    EnemyDice.appendChild(Roll1Display)
    EnemyDice.appendChild(Roll2Display)
    EnemyDice.appendChild(Roll3Display)

    AllyDice = document.createElement("div")
    AllyDice.id = "AllyDice"
    
    Roll1 = Dice1.pick()
    Roll2 = Dice2.pick()
    Roll3 = Dice3.pick()
    
    Roll1Display = document.createElement("div")
    Roll2Display = document.createElement("div")
    Roll3Display = document.createElement("div")
    Roll1Display.innerHTML = Roll1
    Roll2Display.innerHTML = Roll2
    Roll3Display.innerHTML = Roll3
    Roll1Display.className = "RollDisplay"
    Roll2Display.className = "RollDisplay"
    Roll3Display.className = "RollDisplay"

    
    CombatScreen.appendChild(AllyDice)
    AllyDice.appendChild(Roll1Display)
    AllyDice.appendChild(Roll2Display)
    AllyDice.appendChild(Roll3Display)
    Roll1Display.onclick = function RollDisplayOnclick(){
        for(let i = 0;i<AllyDice.children.length;i++){
            //console.log(i)
            if(AllyDice.children[i].style.backgroundColor == 'red' && AllyDice.children[i] != this){
                AllyDice.children[i].style.backgroundColor = 'aliceblue'
            }
        }
        if(this.style.backgroundColor != 'red' && this.style.backgroundColor != 'grey'){
            this.style.backgroundColor = 'red'
        
            document.getElementById('AllyPicks').children[0].style.boxShadow = '0px 0px 5px red'
            document.getElementById('AllyPicks').children[1].style.boxShadow = '0px 0px 5px red'
            document.getElementById('AllyPicks').children[2].style.boxShadow = '0px 0px 5px red'
            pickedDice = this
            document.getElementById('AllyPicks').children[0].onclick = function choosing(){
                this.style.backgroundColor = 'aliceblue'
                this.innerHTML = pickedDice.innerHTML
                pickedDice.style.backgroundColor = 'grey'
                document.getElementById('AllyPicks').children[0].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[0].onclick = ''
                document.getElementById('AllyPicks').children[1].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[1].onclick = ''
                document.getElementById('AllyPicks').children[2].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[2].onclick = ''
            }
            document.getElementById('AllyPicks').children[1].onclick = function choosing(){
                this.style.backgroundColor = 'aliceblue'
                this.innerHTML = pickedDice.innerHTML
                pickedDice.style.backgroundColor = 'grey'
                document.getElementById('AllyPicks').children[0].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[0].onclick = ''
                document.getElementById('AllyPicks').children[1].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[1].onclick = ''
                document.getElementById('AllyPicks').children[2].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[2].onclick = ''
            }
            document.getElementById('AllyPicks').children[2].onclick = function choosing(){
                this.style.backgroundColor = 'aliceblue'
                this.innerHTML = pickedDice.innerHTML
                pickedDice.style.backgroundColor = 'grey'
                document.getElementById('AllyPicks').children[0].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[0].onclick = ''
                document.getElementById('AllyPicks').children[1].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[1].onclick = ''
                document.getElementById('AllyPicks').children[2].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[2].onclick = ''
            }
        }
    }
    Roll2Display.onclick = function RollDisplayOnclick(){
        for(let i = 0;i<AllyDice.children.length;i++){
            //console.log(i)
            if(AllyDice.children[i].style.backgroundColor == 'red' && AllyDice.children[i] != this){
                AllyDice.children[i].style.backgroundColor = 'aliceblue'
            }
        }
        if(this.style.backgroundColor != 'red' && this.style.backgroundColor != 'grey'){
            this.style.backgroundColor = 'red'
        
            document.getElementById('AllyPicks').children[0].style.boxShadow = '0px 0px 5px red'
            document.getElementById('AllyPicks').children[1].style.boxShadow = '0px 0px 5px red'
            document.getElementById('AllyPicks').children[2].style.boxShadow = '0px 0px 5px red'
            pickedDice = this
            document.getElementById('AllyPicks').children[0].onclick = function choosing(){
                this.style.backgroundColor = 'aliceblue'
                this.innerHTML = pickedDice.innerHTML
                pickedDice.style.backgroundColor = 'grey'
                document.getElementById('AllyPicks').children[0].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[0].onclick = ''
                document.getElementById('AllyPicks').children[1].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[1].onclick = ''
                document.getElementById('AllyPicks').children[2].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[2].onclick = ''
            }
            document.getElementById('AllyPicks').children[1].onclick = function choosing(){
                this.style.backgroundColor = 'aliceblue'
                this.innerHTML = pickedDice.innerHTML
                pickedDice.style.backgroundColor = 'grey'
                document.getElementById('AllyPicks').children[0].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[0].onclick = ''
                document.getElementById('AllyPicks').children[1].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[1].onclick = ''
                document.getElementById('AllyPicks').children[2].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[2].onclick = ''
            }
            document.getElementById('AllyPicks').children[2].onclick = function choosing(){
                this.style.backgroundColor = 'aliceblue'
                this.innerHTML = pickedDice.innerHTML
                pickedDice.style.backgroundColor = 'grey'
                document.getElementById('AllyPicks').children[0].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[0].onclick = ''
                document.getElementById('AllyPicks').children[1].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[1].onclick = ''
                document.getElementById('AllyPicks').children[2].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[2].onclick = ''
            }
        }
    }
    Roll3Display.onclick = function RollDisplayOnclick(){
        AllyDice = document.getElementById("AllyDice")
        //AllyDice.children[0].style.backgroundColor = 'aliceblue'
        for(let i = 0;i<AllyDice.children.length;i++){
            //console.log(i)
            if(AllyDice.children[i].style.backgroundColor == 'red' && AllyDice.children[i] != this){
                AllyDice.children[i].style.backgroundColor = 'aliceblue'
            }
        }
        if(this.style.backgroundColor != 'red' && this.style.backgroundColor != 'grey'){
            this.style.backgroundColor = 'red'
        
            document.getElementById('AllyPicks').children[0].style.boxShadow = '0px 0px 5px red'
            document.getElementById('AllyPicks').children[1].style.boxShadow = '0px 0px 5px red'
            document.getElementById('AllyPicks').children[2].style.boxShadow = '0px 0px 5px red'
            pickedDice = this
            document.getElementById('AllyPicks').children[0].onclick = function choosing(){
                this.style.backgroundColor = 'aliceblue'
                this.innerHTML = pickedDice.innerHTML
                pickedDice.style.backgroundColor = 'grey'
                document.getElementById('AllyPicks').children[0].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[0].onclick = ''
                document.getElementById('AllyPicks').children[1].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[1].onclick = ''
                document.getElementById('AllyPicks').children[2].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[2].onclick = ''
            }
            document.getElementById('AllyPicks').children[1].onclick = function choosing(){
                this.style.backgroundColor = 'aliceblue'
                this.innerHTML = pickedDice.innerHTML
                pickedDice.style.backgroundColor = 'grey'
                document.getElementById('AllyPicks').children[0].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[0].onclick = ''
                document.getElementById('AllyPicks').children[1].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[1].onclick = ''
                document.getElementById('AllyPicks').children[2].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[2].onclick = ''
            }
            document.getElementById('AllyPicks').children[2].onclick = function choosing(){
                this.style.backgroundColor = 'aliceblue'
                this.innerHTML = pickedDice.innerHTML
                pickedDice.style.backgroundColor = 'grey'
                document.getElementById('AllyPicks').children[0].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[0].onclick = ''
                document.getElementById('AllyPicks').children[1].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[1].onclick = ''
                document.getElementById('AllyPicks').children[2].style.boxShadow = 'none'
                document.getElementById('AllyPicks').children[2].onclick = ''
            }
        }
    }
}
function ProceedToCombat(Enemy){
    proceed = false
    console.log(document.getElementById('AllyPicks').children.length)
    for(let i = 0;i<document.getElementById('AllyPicks').children.length;i++){
        if(document.getElementById('AllyPicks').children[i].style.backgroundColor == 'aliceblue'){
            proceed = true
            
            
        }else{
            proceed = false
            break
        }
    }
    if(proceed && document.getElementById("Fight").innerHTML == 'Check'){
        //reveal enemy dice
        if(Enemy == 'A'){
            EnemyPicks = document.getElementById('EnemyPicks')
            for(let i = 0;i<3;i++){

                EnemyPicks.children[i].innerHTML = EnemyDice.children[i].innerHTML
                EnemyPicks.children[i].style.backgroundColor = "aliceblue"
            }
        }
        document.getElementById("Fight").innerHTML = 'Fight'
        
        
    }else if(document.getElementById("Fight").innerHTML == 'Fight'){
        wins = 0
        for(let i = 0;i<3;i++){

            EnemyPicks.children[i].innerHTML = EnemyDice.children[i].innerHTML
            EnemyPicks.children[i].style.backgroundColor = "aliceblue"
            if(parseInt(EnemyPicks.children[i].innerHTML) >= parseInt(AllyPicks.children[i].innerHTML)){
                EnemyPicks.children[i].style.backgroundColor = 'green'
                AllyPicks.children[i].style.backgroundColor = 'red'
            }else{
                EnemyPicks.children[i].style.backgroundColor = 'red'
                AllyPicks.children[i].style.backgroundColor = 'green'
                wins++
            }
        }if(wins >= 2){document.getElementById("Fight").innerHTML = 'Win'}
        else{document.getElementById("Fight").innerHTML = 'Lost'}
    }else if(document.getElementById("Fight").innerHTML == 'Win'){
        document.getElementById("CombatScreen").remove()
        playerIndex = Routes[CurrentRoute].indexOf('#')
        Routes[CurrentRoute][playerIndex+1] = '-'
        updateContainer()
        InCombat = false
        document.getElementById("Search").children[0].innerHTML = "Name"
        document.getElementById("Search").children[1].innerHTML = "Description"
        Gold.add(1*wins)
    }else if(document.getElementById("Fight").innerHTML == 'Lost'){
        document.getElementById("CombatScreen").remove()
        InCombat = false
    }
    
}
//make an inventory for stuff
//store what has been fought before


Initialise()
updateContainer()
</script>

</body>

